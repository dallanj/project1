<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- FONT IMPORTS -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Lora:ital@0;1&family=Raleway:wght@400;700&display=swap" rel="stylesheet"> 

    <!-- STYLE SHEET IMPORTS -->
    <link rel="stylesheet" href="./styles/style.css">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.13.0/css/all.css">

    <title>Contact</title>
</head>
<body>

    <!-- popup box -->
    <div id="popup" class="overlay">
        <div class="popup">
            <span id="closePopup">
                <i class="far fa-times-circle"></i>
            </span>
            Success! Message has been sent <i class="far fa-check-circle"></i>
        </div>
        
    </div>

    <!-- Header of page -->
	<header class="home">

		<!-- Wrapper to contain content -->
		<div class="wrapper headerPadding">
            <div class="headerContent">
                <!-- Navigation of site -->
                <nav class="topBar">
                    <div class="logo">
                        <h1><a href="./index.html">DELICIOUS</a></h1>
                    </div>
                    <ul class="nav clearfix">
                        <li class="desktop"><a href="./index.html">HOME</a></li>
                        <li class="desktop"><a href="">ABOUT</a></li>
                        <li class="desktop"><a href="">RECIPES</a></li>
                        <li class="desktop"><a href="">NUTRITION</a></li>
                        <li class="desktop"><a href="./blog.html">BLOG</a></li>
                        <li class="desktop"><a href="">SHOP</a></li>
                        <li class="desktop"><a class="active">CONTACT</a></li>
                        <li class="desktop"><a href=""><div class="cart"><span class="count">2</span></div><i class="fas fa-shopping-bag"></i></a></li>
                        <li class="desktop"><a href=""><i class="fas fa-search"></i></a></li>

                        <li class="mobile"><i class="fas fa-bars"></i>
                            <ul class="sub-menu">
                                <li><a href="./index.html">HOME</a></li>
                                <li><a href="">ABOUT</a></li>
                                <li><a href="">RECIPES</a></li>
                                <li><a href="">NUTRITION</a></li>
                                <li><a href="./blog.html">BLOG</a></li>
                                <li><a href="">SHOP</a></li>
                                <li><a class="active">CONTACT</a></li>
                                <li><a href="">CART <div class="cartMobile"><span class="count">2</span></div></a></li>
                                <li><a href="">SEARCH</a></li>
                            </ul>
                        </li>
                        
                        
                    </ul>
                </nav>
            </div>
		</div>
	</header>
    
    
    <main class="wrapperContact">



        <section>

            <div class="form">
                <h2>DROP US A LINE</h2>
                <!-- Form for leaving comments -->
                <form class="commentForm" action="" method="POST">
                    
                    <div id="name">
                        <input type="text" name="name" placeholder="Your Name" id="inputName">
                    </div>

                    <div id="email">
                        <input type="text" name="email" placeholder="Your Email" id="inputEmail">
                    </div>

                    <div id="subject">
                        <input type="text" name="subject" placeholder="Subject" id="inputSubject">
                    </div>
                    
                    <div id="message">
                        <textarea name="message" id="inputMessage" placeholder="Message"></textarea>
                    </div>
                    
                    <button type="submit" name="submit" id="submit">SEND MESSAGE <i class="fas fa-long-arrow-alt-right"></i></button>
                </form>
            </div>

            <div class="details">
                <h2>CONTACT DETAILS</h2>
                <p>
                    Beetroot water spinach okra water chest-
                    nut ricebean pea catsear courgette summer
                    purslane. Water spinach arugula pea tatsoi
                    aubergine spring onion bush tomato kale.
                </p>

                <h3>WORKING HOURS</h3>
                <p>
                    <span class="days">MON - FRI</span> : 08:00am -05:30pm
                </p>
                <p class="italic">
                    Not working on Saturday and Sunday!
                </p>

                <h3>CONTACT INFO</h3>
                <p>A delicious restaurant</p>
                <p>Toronto, Ontario</p>

                <p class="spacing">yum@food.com</p>

                <p>+1 234 567 8910</p>

            </div>

            
        </section>
        <span class="right"></span>
        
        <img class="full-bleed" src="./assets/contact-2.jpeg">
      
    </main>

    <footer>
        <div class="wrapper">
            <div class="content">

                <!-- First row of columns-->
                <div class="colHeader">
                    <h2>
                        DELICIOUS
                    </h2>
                </div>
                <div class="colHeader">
                    <div class="header">
                        RECENT POSTS
                    </div>
                </div>
                <div class="colHeader">
                    <div class="header">
                        SUBSCRIBE NOW
                    </div>
                </div>

                <!-- Second row of columns-->
                <div class="col">
                    <div class="row">
                        <p>
                            Soko radicchio bunya nuts gram dulse
    silver beet parsnip napa cabbage lotus
    root sea lettuce brussels sprout cabbage.
                        </p>
                    </div>

                    <div class="row">
                        <p>A delicious restaurant</p>
                        <p>Toronto, Ontario</p>
                    </div>

                    <div class="row">
                        <p>yum@food.com</p>
                    </div>

                    <div class="row">
                        <p>+1 234 567 8910</p>
                    </div>

                </div>
                <div class="col">

                    <div class="row">
                        <p>Beetroot water spinach okra water</p>
                    </div>
                    
                    <div class="row">
                        <p>Chestnut ricebean pea catsear courgette</p>
                    </div>

                    <div class="row">
                        <p>Summer purslane spinach arugula pea</p>
                    </div>

                    <div class="row">
                        <p>Tatsoi aubergine spring onion bush</p>
                    </div>

                    <div class="row">
                        <p>Tomato kale radicchio turnip chicory</p>
                    </div>

                    <div class="row">
                        <p>Salsify pea sprouts fava bean</p>
                    </div>
                    
                </div>
                <div class="col">
                    
                    <div class="row">
                        <p>Get all of our newest recipes immediately in your inbox!</p>
                        <!-- Form for email subscription -->
                        <form action="" method="POST">
                            <div class="subscribeForm">
                                <input type="text" name="email" placeholder="Enter your email" id="subscribeEmail">
                                <button type="submit" name="submit" id="subscribeSubmit"><i class="fas fa-long-arrow-alt-right"></i></button>
                            </div>
                        </form>
                    </div>

                    <div class="row">
                        <p>
                            <span class="socialLinks">
                                <a href=""><i class="fab fa-facebook-f"></i></a>
                                <a href=""><i class="fab fa-twitter"></i></a>
                                <a href=""><i class="fab fa-instagram"></i></a>
                            </span>
                        </p>
                    </div>

                </div>

            </div>
        </div>

        <div class="footer">
            <div class="wrapper">
                <p class="copyright">Copyrights Â© 2015 by <span> POLAR </span>. All Rights Reserved.</p>
            </div>
        </div>
    </footer>

    <script>
        

        function setError(firstId, secondId, message) {
            // remove existing error
            const div = document.getElementById(firstId);
            if(div.children.length > 1) {
                div.removeChild(div.lastChild);
            }
            // change background to red
            secondId.style.background = '#fbe7f0'

            // create label
            const node = document.createElement("label");

            // create message for label
            const textnode = document.createTextNode(message);

            // create and set attribute
            const att = document.createAttribute("for");       // Create a "class" attribute
            att.value = secondId; 
            node.setAttributeNode(att);

            // append message to label and append label to parent
            node.appendChild(textnode); 
            document.getElementById(firstId).appendChild(node); 
        }


        function unsetError(firstId, secondId) {
            const div = document.getElementById(firstId);

            /*
                if div has more than 1 child
                child[0] is the input
                anything greater needs to be removed
                and background of the input needs to changed back to non error state

            */
            if(div.children.length > 1) {
                div.removeChild(div.lastChild);
            }
            secondId.style.background = '#f6f6f6';
        }


        function emailValidation(email) {
            /*
                Using regex I can validate an email by allowing only numbers, letters
                And following a specific pattern ____@___.__

            */
            const regex = /^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/;
            return regex.test(email);
        }

        const formElement = document.querySelector('form');

        formElement.addEventListener('submit', function(event) {
            const name = document.querySelector('#name');
            const email = document.querySelector('#email');
            const subject = document.querySelector('#subject');
            const message = document.querySelector('#message');
            
            const inputName = document.querySelector('#inputName');
            const inputEmail = document.querySelector('#inputEmail');
            const inputSubject = document.querySelector('#inputSubject');
            const inputMessage = document.querySelector('#inputMessage');

            event.preventDefault();

            if(!inputName.value.trim()) {
                setError('name', inputName, 'You must enter your name')       
            } else {
                unsetError('name', inputName);
            }
            if(!inputEmail.value.trim()) {
                setError('email', inputEmail, 'You must enter your email')       
            } else {
                unsetError('email', inputEmail);
            }
            if(!emailValidation(inputEmail.value) && inputEmail.value.trim()) {
                setError('email', inputEmail, 'Enter a valid email address') 
            }
            if(!inputSubject.value.trim()) {
                setError('subject', inputSubject, 'You must enter a subject')       
            } else {
                unsetError('subject', inputSubject);
            }
            if(!inputMessage.value.trim()) {
                setError('message', inputMessage, 'You must enter a message');
            } else {
                unsetError('message', inputMessage);
            }
            if(inputName.value.trim() && inputEmail.value.trim() && emailValidation(inputEmail.value) && inputSubject.value.trim() && inputMessage.value.trim()) {
                const popup = document.getElementById("popup");
                popup.style.display = "block";
            }
        });

        const closePopup = document.querySelector('#closePopup');

        closePopup.addEventListener('click', function(event) {
            popup.style.display = "none";
        });
    </script>

</body>
</html>